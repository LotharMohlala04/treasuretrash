<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Buy | Treasure Trash</title>
    <meta name="description" content="Flat UI Kit Free is a Twitter Bootstrap Framework design and Theme, this responsive framework includes a PSD and HTML version."/>

    <meta name="viewport" content="width=1000, initial-scale=1.0, maximum-scale=1.0">

    <!-- Loading Bootstrap -->
    <link href="../dist/css/vendor/bootstrap.min.css" rel="stylesheet">

    <!-- Loading Flat UI -->
    <link href="../dist/css/flat-ui.css" rel="stylesheet">
    <link href="../docs/assets/css/demo.css" rel="stylesheet">

    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.min.css'>

    <link rel="shortcut icon" href="../dist/favicon.ico">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
      <script src="dist/js/vendor/html5shiv.js"></script>
      <script src="dist/js/vendor/respond.min.js"></script>
    <![endif]-->

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.all.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="row demo-row">
        <div class="col">
          <nav class="navbar navbar-inverse navbar-embossed navbar-expand-lg" role="navigation">
            <a class="navbar-brand" href="../index.html">Treasure Trash <img src="../dist/favicon.ico"></a>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse-01"></button>
            <div class="collapse navbar-collapse" id="navbar-collapse-01">
              <ul class="nav navbar-nav mr-auto">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Listing</a>
                  <span class="dropdown-arrow"></span>
                  <ul class="dropdown-menu">
                    <li><a href="#">Buy</a></li>
                    <li><a href="#">Recycle</a></li>
                    <li><a href="#">Eliminate</a></li>
                  </ul>
                </li>
                <li><a href="#fakelink">About Us</a></li>
               </ul>
               <form class="navbar-form form-inline my-2 my-lg-0" action="#" role="search">
                <div class="form-group">
                  <div class="input-group">
                    <input class="form-control" id="navbarInput-01" type="search" placeholder="Search">
                    <span class="input-group-btn">
                      <button type="submit" class="btn"><span class="fui-search"></span></button>
                    </span>
                  </div>
                </div>
                <span style="color:white; margin-left: 20px" class="fui-user"></span>
                <span style="color:white; padding-left: 10px; padding-top: 15px"><p>Bobo</p></span>
              </form>
            </div><!-- /.navbar-collapse -->
          </nav><!-- /navbar -->
        </div>
      </div> <!-- /row -->

          <h4>Publish your trash here</h4>
      <div class="row demo-sub-section">
        <div class="col-6 ">
          <output id="list" style="width: inherit;"></output>
            <img src="../docs/assets/images/market/add-photo.webp" id="placeholder-upload" alt="Compas" width="100%" >
            <div class="row photo-panel">
                <div class="col-2">
                  <input type="file" id="files" name="files[]" multiple hidden/>
                  <label for="files" class="label-upload"> <span style="color:white; padding: 15px" class="fui-photo"></span></label>
                </div>
            </div>
            
            

        </div>
            <div class="col-6 ">
                <div class="tile-details">  
                  
                  <output id="analysis"></output>
                        <p>Description</p>
                        <div class="form-group">
                            <textarea type="text" value="" class="form-control"></textarea>
                          </div>
                          <p>Labels</p>
                        <div class="tagsinput-primary">
                            <input name="tagsinput" class="tagsinput" data-role="tagsinput" value="" />
                          </div>
                          <p>Location</p>
                        <div class="form-group">
                            <input type="text" value="" class="form-control"/>
                          </div>
                          <p>Proposed Price</p>
                        <div class="form-group">
                            <input type="text" placeholder="R400" value="" class="form-control"/>
                          </div>       
                          <button onclick="fireSweetAlert()" class="btn btn-primary btn-large btn-block">Publish</button>          
                  </div>
            </div>
        </div>

    </div> <!-- /container -->

    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-7">
            <h3 class="footer-title">Treasure Trash</h3>
            <p>If you are reading this, please realise that you are the real treasure.<br/>
            </p>
          </div> <!-- /col-7 -->

          <div class="col-5">
            <div class="footer-banner">
              <!-- <h3 class="footer-title">Get Flat UI Pro</h3> -->
              <ul>
                <!-- <li>Tons of Basic and Custom UI Elements</li>
                <li>A Lot of Useful Samples</li>
                <li>More Vector Icons and Glyphs</li>
                <li>Pro Color Swatches</li>
                <li>Bootstrap Based HTML/CSS/JS Layout</li> -->
              </ul>
              <!-- Go to: <a href="https://designmodo.com/flat" target="_blank">designmodo.com/flat</a> -->
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <!-- Bootstrap 4 requires Popper.js -->
    <script src="https://unpkg.com/popper.js@1.14.1/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="http://vjs.zencdn.net/6.6.3/video.js"></script>
    <script src="../dist/scripts/flat-ui.js"></script>
    <script src="../docs/assets/js/application.js"></script>
    
    <script>

        function fireSweetAlert() {
            Swal.fire(
                'Item added!',
                'Proceed to your dashboard',
                'success'
            ).then((result) => {
                if (result.isConfirmed) {
                    window.location.replace("./seller-dashboard.html");
                }
            })
        }
    
      </script>

<script>
  function handleFileSelect(evt) {
    var files = evt.target.files

   // Loop through the FileList and render image files as thumbnails.
   for (var i = 0, f; f = files[i]; i++) {

     // Only process image files.
     if (!f.type.match('image.*')) {
       continue;
     }

     var reader = new FileReader();

     // Closure to capture the file information.
     reader.onload = (function(theFile) {
       return function(e) {
          // Render thumbnail.
          

          var loader = document.createElement('div');
          loader.setAttribute("class","loader-container");
          loader.setAttribute("id","myData");
          loader.innerHTML = '<div class="loader" id="loader"></div><p style="text-align: center;" id="loader1">Analyzing</p></div>';
          document.getElementById('analysis').insertBefore(loader, null);

          const myTimeout = setTimeout(getAIData, 5000);
        };
      })(f);

      reader.addEventListener("load", () => {
        // convert image file to base64 string
        var span = document.createElement('img');
        span.setAttribute("width","100%");
        document.getElementById('list').insertBefore(span, null);
        document.getElementById('placeholder-upload').remove()
        span.setAttribute("src",reader.result);
      }, false);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);

      function getAIData() {
      fetch('../data/data.json')
          .then(function (response) {
              return response.json();
          })
          .then(function (data) {
              appendData(data.predictedClassifications);
          })
          .catch(function (err) {
              console.log('error: ' + err);
          });

      function appendData(data) {
          var mainContainer = document.getElementById("myData");

          document.getElementById('loader').remove();
          document.getElementById('loader1').remove();
          
          
          var div = document.createElement("div");
          div.setAttribute("class","row");
          div.innerHTML = '<div class="col-12"><p><strong>Suggested Labels:</strong> '+data[0].predictedLabels+'</p><p><strong>Estimated Weight:</strong> '+data[0].weight+'</p><p><strong>Estimated Carbon Footprint:</strong> '+data[0].estimatedCarbonFootprint+'</p></div>'
          mainContainer.appendChild(div);
          
      }
    }
  </script>
  </body>
</html>
